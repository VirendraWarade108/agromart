generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Category {
  id          String    @id @default(cuid())
  name        String
  description String?
  icon        String?
  products    Product[]
}

model Product {
  id           String   @id @default(cuid())
  name         String
  slug         String   @unique
  price        Int
  originalPrice Int?
  rating       Float?
  reviews      Int?     @default(0)
  image        String?
  images       Json?
  description  String?
  stock        Int?     @default(0)
  category     Category? @relation(fields: [categoryId], references: [id])
  categoryId   String?
  vendor       Vendor?  @relation(fields: [vendorId], references: [id])
  vendorId     String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Vendor {
  id           String   @id @default(cuid())
  businessName String   @unique
  email        String   @unique
  phone        String
  password     String
  website      String?
  logo         String?
  description  String?
  city         String?
  state        String?
  country      String?
  isVerified   Boolean  @default(false)
  products     Product[]
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model User {
  id        String  @id @default(cuid())
  fullName  String
  email     String  @unique
  phone     String?
  password  String
  isAdmin   Boolean @default(false)
  createdAt DateTime @default(now())
}

model Order {
  id        String      @id @default(cuid())
  total     Float
  status    String
  coupon    Json?
  items     OrderItem[]
  createdAt DateTime    @default(now())
}

model OrderItem {
  id        String  @id @default(cuid())
  productId String
  quantity  Int
  price     Int
  order     Order   @relation(fields: [orderId], references: [id])
  orderId   String
}
